---
date: 2025-12-28
description: Изучите, как задать сетку для слоя File GDB с помощью Aspose.GIS для
  .NET, включая добавление объектов в слой и проверку диапазона координат.
linktitle: Define Precision Grid for File GDB Layer
second_title: Aspose.GIS .NET API
title: Как задать сетку для слоя File GDB в Aspose.GIS
url: /ru/net/layer-data-operations/define-precision-grid-for-file-gdb-layer/
weight: 21
---

{{< blocks/products/pf/main-wrap-class >}}
{{< blocks/products/pf/main-container >}}
{{< blocks/products/pf/tutorial-page-section >}}

# Как установить сетку для слоя File GDB в Aspose.GIS

## Введение
В этом руководстве вы узнаете, **как установить сетку** для слоя File Geodatabase (GDB) с помощью Aspose.GIS для .NET. Установка точной сетки помогает **проверять диапазон координат**, предотвращает ошибки выхода за пределы и гарантирует, что данные, к которым вы **добавляете объекты в слой**, остаются точными и надёжными. Мы пройдём каждый шаг, объясним, почему настройки важны, и покажем, как справляться с распространёнными подводными камнями.

## Быстрые ответы
- **Что означает «установить сетку»?** Это определяет точность координат и допустимый диапазон для GIS‑слоя.  
- **Зачем нужна точная сетка?** Она защищает ваши данные от недопустимых координат и повышает эффективность хранения.  
- **Какая библиотека предоставляет эту возможность?** Aspose.GIS для .NET.  
- **Нужна ли лицензия?** Доступна пробная версия; для продакшна требуется коммерческая лицензия.  
- **Можно ли использовать это с .NET Core?** Да, Aspose.GIS поддерживает .NET Framework и .NET Core.

## Что такое точная сетка и зачем её устанавливать?
Точная сетка — это набор параметров (origin, scale и т.д.), которые сообщают GIS‑движку, как округлять и сохранять значения координат. Определяя сетку, вы **автоматически проверяете диапазон координат**, и любая попытка вставить точку за пределами сетки вызовет исключение — это помогает **обрабатывать сценарии выхода за диапазон** уже на ранних этапах разработки.

## Предварительные требования
Прежде чем начать, убедитесь, что у вас установлено следующее:

1. **Visual Studio** — любая современная версия (Community, Professional или Enterprise).  
2. **Aspose.GIS для .NET** — скачайте её с [веб‑сайта](https://releases.aspose.com/gis/net/).  
3. **Базовые знания C#** — вы должны уметь создавать консольные проекты .NET.

## Импорт пространств имён
Сначала импортируйте пространства имён, необходимые для работы с Aspose.GIS:

```csharp
using Aspose.Gis;
using Aspose.Gis.Formats.FileGdb;
using Aspose.Gis.Geometries;
using Aspose.Gis.SpatialReferencing;
using System;
using System.Text;
```

## Как установить сетку в слое File GDB
Ниже представлена пошаговая инструкция, показывающая, как именно настроить сетку, создать слой и безопасно **добавлять объекты в слой**.

### Шаг 1: Создание набора данных
Начинаем с создания нового набора данных File Geodatabase. В нём будет размещён слой.

```csharp
var path = "Your Document Directory" + "PrecisionGrid_out.gdb";
using (var dataset = Dataset.Create(path, Drivers.FileGdb))
{
```

### Шаг 2: Определение параметров точной сетки
Здесь мы задаём параметры сетки. Отрегулируйте origin и scale в соответствии с системой координат вашего проекта.

```csharp
var options = new FileGdbOptions
{
    CoordinatePrecisionGrid = new FileGdbCoordinatePrecisionGrid
    {
        XOrigin = -400,
        YOrigin = -400,
        XYScale = 1e10,
        MOrigin = 0,
        MScale = 1e4,
    },
    EnsureValidCoordinatesRange = true,
};
```

*Флаг `EnsureValidCoordinatesRange = true` заставляет Aspose.GIS **проверять диапазон координат** для каждой добавляемой функции.*

### Шаг 3: Создание слоя с сеткой
Теперь создаём новый слой внутри набора данных, применяя только что определённые параметры сетки. Мы будем использовать пространственную ссылочную систему WGS84.

```csharp
using (var layer = dataset.CreateLayer("layer_name", options, SpatialReferenceSystem.Wgs84))
{
```

### Шаг 4: Добавление объектов в слой
Мы создаём два точечных объекта. Первая точка находится внутри сетки, а вторая намеренно выходит за её пределы, чтобы продемонстрировать **как обрабатывать ошибки выхода за диапазон**.

```csharp
var feature = layer.ConstructFeature();
feature.Geometry = new Point(10, 20) { M = 10.1282 };
layer.Add(feature);
feature = layer.ConstructFeature();
feature.Geometry = new Point(-410, 0) { M = 20.2343 };
```

### Шаг 5: Обработка исключений при добавлении объектов за пределами диапазона
Попытка добавить второй объект вызовет исключение, потому что его координата X (`-410`) выходит за пределы заданной сетки. Мы перехватываем исключение и выводим понятное сообщение.

```csharp
try
{
    layer.Add(feature);
}
catch (GisException e)
{
    Console.WriteLine(e.Message); // X value -410 is out of valid range.
}
```

### Шаг 6: Очистка ресурсов
Операторы `using` автоматически закрывают и освобождают набор данных и слой, гарантируя освобождение всех ресурсов.

## Распространённые проблемы и их решения
| Проблема | Почему происходит | Решение |
|----------|-------------------|---------|
| **Exception: “X value … is out of valid range.”** | Координаты находятся за пределами точной сетки. | Скорректировать `XOrigin`, `YOrigin` или `XYScale`, чтобы охватить ваши данные, либо убедиться, что входные данные находятся в заданном диапазоне. |
| **Объекты не отображаются в GIS‑просмотрщике** | Слой не сохранён или указана неверная система координат. | Проверить, что `SpatialReferenceSystem.Wgs84` совпадает с CRS просмотрщика, и что `Dataset.Create` завершилось успешно. |
| **Игнорируются значения M** | `MScale` установлен в 0 или слишком мал. | Задать разумный `MScale` (например, `1e4`), чтобы сохранять измерительные значения. |

## Часто задаваемые вопросы

**В: Можно ли использовать Aspose.GIS для .NET с другими форматами GIS‑файлов?**  
О: Да, Aspose.GIS поддерживает Shapefile, GeoJSON, KML и многие другие форматы.

**В: Совместима ли Aspose.GIS для .NET с .NET Core?**  
О: Абсолютно. Библиотека работает с .NET Framework, .NET Core и .NET 5/6+.

**В: Можно ли выполнять пространственные операции, такие как буферизация или пересечение?**  
О: Да, API включает методы для буферизации, пересечения и вычисления расстояний.

**В: Предоставляет ли Aspose.GIS возможности трансформации координат?**  
О: Да, вы можете преобразовывать геометрии между различными пространственными системами с помощью встроенных инструментов репроекции.

**В: Доступна ли пробная версия?**  
О: Да, её можно скачать бесплатно с [веб‑сайта](https://releases.aspose.com/gis/net/).

---

**Последнее обновление:** 2025-12-28  
**Тестировано с:** Aspose.GIS 24.11 для .NET  
**Автор:** Aspose  

{{< /blocks/products/pf/tutorial-page-section >}}

{{< /blocks/products/pf/main-container >}}
{{< /blocks/products/pf/main-wrap-class >}}

{{< blocks/products/products-backtop-button >}}